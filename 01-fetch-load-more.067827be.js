!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=t.parcelRequirea610;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequirea610=i);var a=i("5IjG7"),o=i("6JpON"),s=i("8MBJY"),u=i("a2hTj"),c=i("7CFNy"),l=function(){"use strict";function t(){e(s)(this,t),this.searchQuery="",this.page=1,this.perPage=40}return e(u)(t,[{key:"fetchCards",value:function(){var e=this;console.log(this);var t="".concat(c.BASE_URL,"?key=").concat(c.API_KEY,"&q=").concat(this.searchQuery,"&image_type=photo&orientation=horizontal&safesearch=true&per_page=").concat(this.perPage,"&page=").concat(this.page);return fetch(t).then((function(e){if(!e.ok)throw new Error(!e.status);return e.json()})).then((function(t){var n=t.totalHits,r=t.hits,i=e.page*e.perPage>=n,a=1===e.page;return e.incrementPage(),{images:r,totalImages:n,isLastPage:i,isFirstPage:a}})).catch()}},{key:"newQuery",value:function(e){this.searchQuery=e,this.page=1}},{key:"incrementPage",value:function(){this.page+=1}}]),t}(),h=i("3vKGz"),d=i("Q1GgU"),f=(s=i("8MBJY"),u=i("a2hTj"),{});Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e};var g=function(){"use strict";function t(n){var r=n.selector,i=n.isHidden,a=void 0!==i&&i;e(s)(this,t),this.button=this.getBtn(r),a&&this.hide()}return e(u)(t,[{key:"getBtn",value:function(e){return document.querySelector(e)}},{key:"enable",value:function(){this.button.disabled=!1,this.button.textContent="Load more"}},{key:"disable",value:function(){this.button.disabled=!0,this.button.textContent="Loading..."}},{key:"show",value:function(){this.button.classList.remove("is-hidden")}},{key:"hide",value:function(){this.button.classList.add("is-hidden")}},{key:"end",value:function(){this.button.disabled=!0,this.button.textContent="The end!"}}]),t}();e(f)(g,"classes",{hidden:"hidden"});var y=(0,h.default)(),p=new(e(a))(".gallery li a",{captions:!0,captionsData:"alt",captionDelay:250,captionPosition:"bottom"}),v=new l,b=new g({selector:".load-more",isHidden:!0});function m(){return b.disable(),v.fetchCards().then((function(t){var n=t.images,r=t.totalImages,i=t.isLastPage,a=t.isFirstPage;if(function(e){y.cardsContainer.insertAdjacentHTML("beforeend",(0,d.default)(e)),p.refresh()}(n),0===n.length)throw b.hide(),new Error("Sorry, there are no images matching your search query. Please try again.");a&&e(o).Notify.success("Hooray! We found ".concat(r," images.")),i?(e(o).Notify.info("We're sorry, but you've reached the end of search results."),b.end()):b.enable()})).catch(P).finally(y.searchForm.reset())}function w(){y.cardsContainer.innerHTML="",p.refresh()}function P(t){console.error(t),e(o).Notify.failure(t.message),b.hide(),y.cardsContainer.innerHTML="<p>Not found!</p>"}y.searchForm.addEventListener("submit",(function(t){t.preventDefault(),w();var n=t.currentTarget.elements.searchQuery.value.trim();if(""===n)return e(o).Notify.failure("Sorry, there are no images matching your search query. Please try again.");v.newQuery(n),b.show(),w(),m().finally((function(){return y.searchForm.reset()}))})),b.button.addEventListener("click",(function(){m()}))}();
//# sourceMappingURL=01-fetch-load-more.067827be.js.map
