function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},a={},n=t.parcelRequirea610;null==n&&((n=function(e){if(e in r)return r[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequirea610=n);var o=n("fZKcF"),s=n("7Y9D8"),i=n("j7oiS");class c{constructor(e){this.searchQuery=e,this.page=1,this.perPage=40}fetchCards(){console.log(this);const e=`${i.BASE_URL}?key=${i.API_KEY}&q=${this.searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${this.perPage}&page=${this.page}`;return fetch(e).then((e=>{if(!e.ok)throw new Error(!e.status);return e.json()})).then((({totalHits:e,hits:t})=>{const r=this.page*this.perPage>=e,a=1===this.page;return this.incrementPage(),{images:t,totalImages:e,isLastPage:r,isFirstPage:a}})).catch()}incrementPage(){this.page+=1}}var l=n("lpPzL"),u=n("dmiDl"),f=n("frEnH");n("50Kfe");const h=new(e(o))(".gallery li a",{captions:!0,captionsData:"alt",captionDelay:250,captionPosition:"bottom"}),d=(0,l.default)();let g=new c;const p=new(0,f.default)({selector:".load-more",isHidden:!0});function y(){p.disable(),g.fetchCards().then((({images:t,totalImages:r,isLastPage:a,isFirstPage:n})=>{if(function(e){d.cardsContainer.insertAdjacentHTML("beforeend",(0,u.default)(e)),h.refresh()}(t),0===t.length)throw new Error("Sorry, there are no images matching your search query. Please try again.");n&&e(s).Notify.success(`Hooray! We found ${r} images.`),a?(e(s).Notify.info("We're sorry, but you've reached the end of search results."),p.hide()):p.enable()})).catch(m),d.searchForm.reset()}function m(t){console.error(t),e(s).Notify.failure(t.message)}d.searchForm.addEventListener("submit",(function(t){t.preventDefault();const r=t.currentTarget.elements.searchQuery.value.trim();if(""===r)return e(s).Notify.failure("Sorry, there are no images matching your search query. Please try again.");g=new c(r),p.show(),d.cardsContainer.innerHTML="",h.refresh(),y()})),p.btnRefs.button.addEventListener("click",(function(){y()}));
//# sourceMappingURL=01-fetch-http.d2a8ff61.js.map
