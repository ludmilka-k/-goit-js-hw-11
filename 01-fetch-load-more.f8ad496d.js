function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},s=t.parcelRequirea610;null==s&&((s=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return r[e]=s,t.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequirea610=s);var i=s("fZKcF"),a=s("7Y9D8"),o=s("j7oiS");var h=s("lpPzL"),c=s("ijW3x");const u=(0,h.default)(),d=new(e(i))(".gallery li a",{captions:!0,captionsData:"alt",captionDelay:250,captionPosition:"bottom"}),l=new class{constructor(){this.searchQuery="",this.page=1,this.perPage=40}fetchCards(){console.log(this);const e=`${o.BASE_URL}?key=${o.API_KEY}&q=${this.searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${this.perPage}&page=${this.page}`;return fetch(e).then((e=>{if(!e.ok)throw new Error(!e.status);return e.json()})).then((({totalHits:e,hits:t})=>{const r=this.page*this.perPage>=e,n=1===this.page;return this.incrementPage(),{images:t,totalImages:e,isLastPage:r,isFirstPage:n}})).catch()}newQuery(e){this.searchQuery=e,this.page=1}incrementPage(){this.page+=1}},f=new class{static classes={hidden:"hidden"};constructor({selector:e,isHidden:t=!1}){this.button=this.getBtn(e),t&&this.hide()}getBtn(e){return document.querySelector(e)}enable(){this.button.disabled=!1,this.button.textContent="Load more"}disable(){this.button.disabled=!0,this.button.textContent="Loading..."}show(){this.button.classList.remove("is-hidden")}hide(){this.button.classList.add("is-hidden")}end(){this.button.disabled=!0,this.button.textContent="The end!"}}({selector:".load-more",isHidden:!0});function g(){return f.disable(),l.fetchCards().then((({images:t,totalImages:r,isLastPage:n,isFirstPage:s})=>{if(function(e){u.cardsContainer.insertAdjacentHTML("beforeend",(0,c.default)(e)),d.refresh()}(t),0===t.length)throw f.hide(),new Error("Sorry, there are no images matching your search query. Please try again.");s&&e(a).Notify.success(`Hooray! We found ${r} images.`),n?(e(a).Notify.info("We're sorry, but you've reached the end of search results."),f.end()):f.enable()})).catch(y).finally(u.searchForm.reset())}function p(){u.cardsContainer.innerHTML="",d.refresh()}function y(t){console.error(t),e(a).Notify.failure(t.message),f.hide(),u.cardsContainer.innerHTML="<p>Not found!</p>"}u.searchForm.addEventListener("submit",(function(t){t.preventDefault(),p();const r=t.currentTarget.elements.searchQuery.value.trim();if(""===r)return e(a).Notify.failure("Sorry, there are no images matching your search query. Please try again.");l.newQuery(r),f.show(),p(),g().finally((()=>u.searchForm.reset()))})),f.button.addEventListener("click",(function(){g()}));
//# sourceMappingURL=01-fetch-load-more.f8ad496d.js.map
